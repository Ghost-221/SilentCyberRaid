<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Services - Siͥleͣnͫt Portal</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <style>
        .category-scroll { display: flex; gap: 10px; padding: 10px 20px; overflow-x: auto; white-space: nowrap; scrollbar-width: none; margin-bottom: 15px; }
        .category-scroll::-webkit-scrollbar { display: none; }
        .cat-chip { background: var(--surface); border: 1px solid var(--border); padding: 8px 16px; border-radius: 20px; font-size: 12px; color: var(--text-muted); cursor: pointer; transition: 0.3s; font-weight: 500; }
        .cat-chip.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3); }
    </style>
</head>
<body>
    <div id="startup-loader" class="startup-loader"><div class="spinner"></div></div>

    <div class="app-container">
        <div id="main-view" style="display:block; padding-top:20px; padding-bottom:90px;">
            <div style="padding:0 20px; margin-bottom:15px; display:flex; justify-content:space-between; align-items:center;">
                <div>
                    <h2 style="margin:0; color:var(--text);">Select Service</h2>
                    <p style="margin:5px 0 0; color:var(--text-muted); font-size:13px;">Choose a category below</p>
                </div>
                <button class="theme-btn" onclick="window.toggleTheme()"><i class="fas fa-adjust"></i></button>
            </div>

            <!-- Categories & Grid -->
            <div id="category-bar" class="category-scroll anim-fade"></div>
            <div id="dynamic-services-grid" class="services-grid anim-fade">
                <div style="grid-column: span 2; text-align: center; padding: 20px; color: var(--text-muted);">
                    <i class="fas fa-spinner fa-spin"></i> Loading...
                </div>
            </div>
        </div>

        <!-- Bottom Nav -->
        <div class="bottom-nav" style="display:flex;">
            <a href="index.html" class="nav-item"><i class="fas fa-home"></i> Home</a>
            <a href="javascript:void(0)" class="nav-item active"><i class="fas fa-th-large"></i> Services</a>
            <a href="index.html?tab=profile" class="nav-item"><i class="fas fa-user"></i> Profile</a>
        </div>
    </div>

    <!-- Order Modal -->
    <div id="ord-modal" class="modal">
        <div class="modal-sheet">
            <div class="close-modal-btn" onclick="document.getElementById('ord-modal').style.display='none'">✕</div>
            <div style="display:flex; justify-content:space-between; margin:15px 0;">
                <h3 id="ord-title" style="margin:0; color:var(--text);">Service</h3>
                <span style="background:#dbeafe; color:#1e40af; font-size:12px; font-weight:700; padding:4px 10px; border-radius:10px;">৳ <span id="ord-cost">0</span></span>
            </div>
            <div id="ord-dynamic-form"></div>
            <button class="btn-main" onclick="window.confirmOrder()" style="margin-top:20px;">Order Now</button>
        </div>
    </div>
    
    <!-- FIX: Full Chat Modal Added Here -->
    <div id="chat-modal" class="modal" style="z-index:210">
        <div class="modal-sheet" style="height:85vh; padding:0; border-radius:20px 20px 0 0; background:var(--bg);">
            <div style="display:flex; justify-content:space-between; align-items:center; padding:15px 20px; background:var(--surface); border-bottom:1px solid var(--border);">
                <h3 id="chat-head" style="margin:0; font-size:16px; color:var(--text);">Chat</h3>
                <i class="fas fa-times-circle" onclick="window.closeChatModal()" style="font-size:24px; color:var(--text-muted); cursor:pointer;"></i>
            </div>
            <div id="chat-box" style="flex:1; overflow-y:auto; padding:20px; display:flex; flex-direction:column; gap:8px;"></div>
            <div id="chat-input-wrap" class="chat-input-area">
                <input id="chat-in" class="auth-inp" style="margin:0;" placeholder="Type message...">
                <button onclick="window.sendMsg()" style="background:var(--primary); color:white; border:none; border-radius:12px; width:50px;"><i class="fas fa-paper-plane"></i></button>
            </div>
            <div id="chat-closed-wrap" class="chat-closed-ui" style="display:none;"></div>
        </div>
    </div>

    <!-- Toast Container (Required for popups) -->
    <div id="toast-container" class="toast-container"></div>

    <script type="module" src="script.js"></script>
</body>
</html>